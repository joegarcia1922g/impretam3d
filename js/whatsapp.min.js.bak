(()=>{const p="528334318725",c=document.createElement.bind(document),l=e=>e.preventDefault();document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".whatsapp-button").forEach(e=>{e.onclick=t=>{l(t);const o=c("div");},createPopup(){if(this.state.activePopup)return this.closePopup();const e=document.createElement("div");e.className="whatsapp-popup",e.innerHTML=`<div class="whatsapp-popup-content"><div class="whatsapp-header"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt=""><h3>Contactar por WhatsApp</h3><button type="button" class="close-btn">&times;</button></div><form id="whatsappForm"><input type="text" id="whatsappName" placeholder="Tu nombre" required><input type="tel" id="whatsappPhone" placeholder="Tu nÃºmero de WhatsApp" pattern="[0-9]{10}" required><textarea id="whatsappMessage" placeholder="Tu mensaje" required></textarea><button type="submit"><img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="">Contactar ahora</button></form></div>`,document.body.appendChild(e),this.state.activePopup=e,this.state.form=e.querySelector("#whatsappForm"),this.setupEvents()},setupEvents(){this.state.activePopup.addEventListener("click",e=>{e.target===this.state.activePopup&&this.closePopup()}),this.state.activePopup.querySelector(".close-btn").addEventListener("click",()=>this.closePopup()),this.state.form.addEventListener("submit",e=>this.handleSubmit(e)),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.closePopup()})},closePopup(){this.state.activePopup&&(this.state.activePopup.remove(),this.state.activePopup=null,this.state.form=null)},async handleSubmit(e){e.preventDefault();const t=new FormData(this.state.form),a=Object.fromEntries(t.entries());if(!this.validateData(a))return;const s=this.config.templates.message(a),n=this.config.phones[0];this.closePopup(),window.location.href=`https://wa.me/${n}?text=${encodeURIComponent(s)}`},validateData(e){return e.whatsappName?.trim()&&e.whatsappPhone?.trim()&&e.whatsappMessage?.trim()?/^[0-9]{10}$/.test(e.whatsappPhone)?1:(alert(this.config.templates.error.phone),0):(alert(this.config.templates.error.fields),0)}};WhatsApp.init();
